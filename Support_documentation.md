# Документація API техпідтримки

## Огляд
Додано систему техпідтримки для проекту оренди авто. Користувачі можуть створювати запити до сапорта, а адміністратори можуть їх переглядати та обробляти.

## Backend API Endpoints

### Базовий URL
```
http://127.0.0.1:8000/main/support/
```

### Endpoints

#### 1. Отримати список запитів
- **URL**: `GET /main/support/`
- **Авторизація**: Потрібна (JWT токен)
- **Поведінка**:
  - Звичайні користувачі бачать тільки свої запити
  - Адміністратори (is_staff=true) бачать всі запити
- **Відповідь**: Масив об'єктів SupportRequest

#### 2. Створити новий запит
- **URL**: `POST /main/support/`
- **Авторизація**: Потрібна (JWT токен)
- **Тіло запиту**:
```json
{
  "subject": "Тема запиту",
  "message": "Текст повідомлення"
}
```
- **Відповідь**: Створений об'єкт SupportRequest з id

#### 3. Отримати деталі запиту
- **URL**: `GET /main/support/<id>/`
- **Авторизація**: Потрібна (JWT токен)
- **Поведінка**: Користувач може переглядати тільки свої запити, адмін - всі

#### 4. Оновити запит
- **URL**: `PUT /main/support/<id>/`
- **Авторизація**: Потрібна (JWT токен)
- **Поведінка**: 
  - Користувач може оновлювати тільки свої запити
  - Адмін може оновлювати будь-які запити (може додавати відповідь та змінювати статус)
- **Тіло запиту** (часткове оновлення):
```json
{
  "status": "in_progress",
  "response": "Відповідь сапорта"
}
```

#### 5. Видалити запит
- **URL**: `DELETE /main/support/<id>/`
- **Авторизація**: Потрібна (JWT токен)
- **Поведінка**: Користувач може видаляти тільки свої запити, адмін - всі

## Модель даних SupportRequest

```javascript
{
  "id": 1,
  "user": 1,
  "user_username": "username",
  "user_email": "user@email.com",
  "subject": "Тема запиту",
  "message": "Текст повідомлення",
  "status": "new",             
  "response": "",
  "created_at": "2024-01-01T12:00:00Z",
  "updated_at": "2024-01-01T12:00:00Z"
}
```

## Статуси запитів

- `new` - Новий запит (за замовчуванням)
- `in_progress` - Запит в обробці
- `resolved` - Запит вирішено
- `closed` - Запит закрито

## Backend зміни

- Модель: `main/models.py` - додано клас `SupportRequest`
- Серіалізатор: `main/serializers.py` - додано `SupportRequestSerializer`
- View: `main/views.py` - додано `SupportRequestView`
- URLs: `main/urls.py` - додані маршрути `/support/` та `/support/<id>/`
- Admin: `main/admin.py` - додано `SupportRequestAdmin` для управління в адмін-панелі
- Міграція: `main/migrations/0007_supportrequest.py` - створена міграція
